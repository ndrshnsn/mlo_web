var k=Object.defineProperty;var j=(i,a,e)=>a in i?k(i,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[a]=e;var A=(i,a,e)=>j(i,typeof a!="symbol"?a+"":a,e);import{C as x}from"./application-BzDBbQCT.js";import{i as I}from"./i18n-CTZ1ofMK.js";(function(i){var a=function(e,t){this.options=t,this.$element=i(e),this.$container=i("<div/>",{class:"ms-container"}),this.$selectableContainer=i("<div/>",{class:"ms-selectable"}),this.$selectionContainer=i("<div/>",{class:"ms-selection"}),this.$selectableUl=i("<ul/>",{class:"ms-list",tabindex:"-1"}),this.$selectionUl=i("<ul/>",{class:"ms-list",tabindex:"-1"}),this.scrollTo=0,this.elemsSelector="li:visible:not(.ms-optgroup-label,.ms-optgroup-container,."+t.disabledClass+")"};a.prototype={constructor:a,init:function(){var e=this,t=this.$element;if(t.next(".ms-container").length===0){t.css({position:"absolute",left:"-9999px"}),t.attr("id",t.attr("id")?t.attr("id"):Math.ceil(Math.random()*1e3)+"multiselect"),this.$container.attr("id","ms-"+t.attr("id")),this.$container.addClass(e.options.cssClass),t.find("option").each(function(){e.generateLisFromOption(this)}),this.$selectionUl.find(".ms-optgroup-label").hide(),e.options.selectableHeader&&e.$selectableContainer.append(e.options.selectableHeader),e.$selectableContainer.append(e.$selectableUl),e.options.selectableFooter&&e.$selectableContainer.append(e.options.selectableFooter),e.options.selectionHeader&&e.$selectionContainer.append(e.options.selectionHeader),e.$selectionContainer.append(e.$selectionUl),e.options.selectionFooter&&e.$selectionContainer.append(e.options.selectionFooter),e.$container.append(e.$selectableContainer),e.$container.append(e.$selectionContainer),t.after(e.$container),e.activeMouse(e.$selectableUl),e.activeKeyboard(e.$selectableUl);var s=e.options.dblClick?"dblclick":"click";e.$selectableUl.on(s,".ms-elem-selectable",function(){e.select(i(this).data("ms-value"))}),e.$selectionUl.on(s,".ms-elem-selection",function(){e.deselect(i(this).data("ms-value"))}),e.activeMouse(e.$selectionUl),e.activeKeyboard(e.$selectionUl),t.on("focus",function(){e.$selectableUl.focus()})}var l=t.find("option:selected").map(function(){return i(this).val()}).get();e.select(l,"init"),typeof e.options.afterInit=="function"&&e.options.afterInit.call(this,this.$container)},addImageToOption:function(e,t){t.prepend(i("<img/>",{src:e,class:"round multiselect-image"}))},generateLisFromOption:function(e,t,s){for(var l=this,n=l.$element,c="",o=i(e),r=0;r<e.attributes.length;r++){var f=e.attributes[r];f.name!=="value"&&f.name!=="disabled"&&(c+=f.name+'="'+f.value+'" ')}var m=o.data("html")??"<span>"+l.escapeHTML(o.text())+"</span>",h=i("<li "+c+">"+m+"</li>"),d=h.clone(),b=o.val(),S=l.sanitize(b);h.data("ms-value",b).addClass("ms-elem-selectable").attr("id",S+"-selectable"),d.data("ms-value",b).addClass("ms-elem-selection").attr("id",S+"-selection").hide(),(o.attr("disabled")||n.attr("disabled"))&&(d.addClass(l.options.disabledClass),h.addClass(l.options.disabledClass));var C=o.data("ms-image");C&&(l.addImageToOption(C,h),l.addImageToOption(C,d));var v=o.parent("optgroup");if(v.length>0){var y=v.attr("label"),g=l.sanitize(y),u=l.$selectableUl.find("#optgroup-selectable-"+g),p=l.$selectionUl.find("#optgroup-selection-"+g);if(u.length===0){var H='<li class="ms-optgroup-container"></li>',w='<ul class="ms-optgroup"><li class="ms-optgroup-label"><span>'+y+"</span></li></ul>";u=i(H),p=i(H),u.attr("id","optgroup-selectable-"+g),p.attr("id","optgroup-selection-"+g),u.append(i(w)),p.append(i(w)),l.options.selectableOptgroup&&(u.find(".ms-optgroup-label").on("click",function(){var U=v.children(":not(:selected, :disabled)").map(function(){return i(this).val()}).get();l.select(U)}),p.find(".ms-optgroup-label").on("click",function(){var U=v.children(":selected:not(:disabled)").map(function(){return i(this).val()}).get();l.deselect(U)})),l.$selectableUl.append(u),l.$selectionUl.append(p)}t=t===void 0?u.find("ul").children().length:t+1,h.insertAt(t,u.children()),d.insertAt(t,p.children())}else t=t===void 0?l.$selectableUl.children().length:t,h.insertAt(t,l.$selectableUl),d.insertAt(t,l.$selectionUl)},addOption:function(e){var t=this;e.value!==void 0&&e.value!==null&&(e=[e]),i.each(e,function(s,l){if(l.value!==void 0&&l.value!==null&&t.$element.find("option[value='"+l.value+"']").length===0){var n=i('<option value="'+l.value+'">'+l.text+"</option>"),c=l.nested===void 0?t.$element:i("optgroup[label='"+l.nested+"']"),s=parseInt(typeof l.index>"u"?c.children().length:l.index);l.optionClass&&n.addClass(l.optionClass),l.disabled&&n.prop("disabled",!0),n.insertAt(s,c),t.generateLisFromOption(n.get(0),s,l.nested)}})},escapeHTML:function(e){return i("<div>").text(e).html()},activeKeyboard:function(e){var t=this;e.on("focus",function(){i(this).addClass("ms-focus")}).on("blur",function(){i(this).removeClass("ms-focus")}).on("keydown",function(s){switch(s.which){case 40:case 38:s.preventDefault(),s.stopPropagation(),t.moveHighlight(i(this),s.which===38?-1:1);return;case 37:case 39:s.preventDefault(),s.stopPropagation(),t.switchList(e);return;case 9:if(t.$element.is("[tabindex]")){s.preventDefault();var l=parseInt(t.$element.attr("tabindex"),10);l=s.shiftKey?l-1:l+1,i('[tabindex="'+l+'"]').focus();return}else s.shiftKey&&t.$element.trigger("focus")}if(i.inArray(s.which,t.options.keySelect)>-1){s.preventDefault(),s.stopPropagation(),t.selectHighlighted(e);return}})},moveHighlight:function(e,t){var s=e.find(this.elemsSelector),l=s.filter(".ms-hover"),n=null,c=s.first().outerHeight(),o=e.height();if(""+this.$container.prop("id"),s.removeClass("ms-hover"),t===1){if(n=l.nextAll(this.elemsSelector).first(),n.length===0){var r=l.parent();if(r.hasClass("ms-optgroup")){var f=r.parent(),m=f.next(":visible");m.length>0?n=m.find(this.elemsSelector).first():n=s.first()}else n=s.first()}}else if(t===-1&&(n=l.prevAll(this.elemsSelector).first(),n.length===0)){var r=l.parent();if(r.hasClass("ms-optgroup")){var f=r.parent(),h=f.prev(":visible");h.length>0?n=h.find(this.elemsSelector).last():n=s.last()}else n=s.last()}if(n.length>0){n.addClass("ms-hover");var d=e.scrollTop()+n.position().top-o/2+c/2;e.scrollTop(d)}},selectHighlighted:function(e){var t=e.find(this.elemsSelector),s=t.filter(".ms-hover").first();s.length>0&&(e.parent().hasClass("ms-selectable")?this.select(s.data("ms-value")):this.deselect(s.data("ms-value")),t.removeClass("ms-hover"))},switchList:function(e){e.blur(),this.$container.find(this.elemsSelector).removeClass("ms-hover"),e.parent().hasClass("ms-selectable")?this.$selectionUl.focus():this.$selectableUl.focus()},activeMouse:function(e){var t=this;this.$container.on("mouseenter",t.elemsSelector,function(){i(this).parents(".ms-container").find(t.elemsSelector).removeClass("ms-hover"),i(this).addClass("ms-hover")}),this.$container.on("mouseleave",t.elemsSelector,function(){i(this).parents(".ms-container").find(t.elemsSelector).removeClass("ms-hover")})},refresh:function(){this.destroy(),this.$element.multiSelect(this.options)},destroy:function(){i("#ms-"+this.$element.attr("id")).remove(),this.$element.off("focus"),this.$element.css("position","").css("left",""),this.$element.removeData("multiselect")},select:function(e,t){typeof e=="string"&&(e=[e]);var s=this,l=this.$element,n=i.map(e,function(d){return s.sanitize(d)}),c=this.$selectableUl.find("#"+n.join("-selectable, #")+"-selectable").filter(":not(."+s.options.disabledClass+")"),o=this.$selectionUl.find("#"+n.join("-selection, #")+"-selection").filter(":not(."+s.options.disabledClass+")"),r=l.find("option:not(:disabled)").filter(function(){return i.inArray(this.value,e)>-1});if(t==="init"&&(c=this.$selectableUl.find("#"+n.join("-selectable, #")+"-selectable"),o=this.$selectionUl.find("#"+n.join("-selection, #")+"-selection")),c.length>0){c.addClass("ms-selected").hide(),o.addClass("ms-selected").show(),r.attr("selected","selected"),s.$container.find(s.elemsSelector).removeClass("ms-hover");var f=s.$selectableUl.children(".ms-optgroup-container");if(f.length>0){f.each(function(){var d=i(this).find(".ms-elem-selectable");d.length===d.filter(".ms-selected").length&&i(this).find(".ms-optgroup-label").hide()});var m=s.$selectionUl.children(".ms-optgroup-container");m.each(function(){var d=i(this).find(".ms-elem-selection");d.filter(".ms-selected").length>0&&i(this).find(".ms-optgroup-label").show()})}else if(s.options.keepOrder&&t!=="init"){var h=s.$selectionUl.find(".ms-selected");h.length>1&&h.last().get(0)!=o.get(0)&&o.insertAfter(h.last())}t!=="init"&&(l.trigger("change"),typeof s.options.afterSelect=="function"&&s.options.afterSelect.call(this,e))}},deselect:function(e){typeof e=="string"&&(e=[e]);var t=this,s=this.$element,l=i.map(e,function(m){return t.sanitize(m)}),n=this.$selectableUl.find("#"+l.join("-selectable, #")+"-selectable"),c=this.$selectionUl.find("#"+l.join("-selection, #")+"-selection").filter(".ms-selected").filter(":not(."+t.options.disabledClass+")"),o=s.find("option").filter(function(){return i.inArray(this.value,e)>-1});if(c.length>0){n.removeClass("ms-selected").show(),c.removeClass("ms-selected").hide(),o.removeAttr("selected"),t.$container.find(t.elemsSelector).removeClass("ms-hover");var r=t.$selectableUl.children(".ms-optgroup-container");if(r.length>0){r.each(function(){var m=i(this).find(".ms-elem-selectable");m.filter(":not(.ms-selected)").length>0&&i(this).find(".ms-optgroup-label").show()});var f=t.$selectionUl.children(".ms-optgroup-container");f.each(function(){var m=i(this).find(".ms-elem-selection");m.filter(".ms-selected").length===0&&i(this).find(".ms-optgroup-label").hide()})}s.trigger("change"),typeof t.options.afterDeselect=="function"&&t.options.afterDeselect.call(this,e)}},select_all:function(){var e=this.$element,t=e.val();if(e.find('option:not(":disabled")').attr("selected","selected"),this.$selectableUl.find(".ms-elem-selectable").filter(":not(."+this.options.disabledClass+")").addClass("ms-selected").hide(),this.$selectionUl.find(".ms-optgroup-label").show(),this.$selectableUl.find(".ms-optgroup-label").hide(),this.$selectionUl.find(".ms-elem-selection").filter(":not(."+this.options.disabledClass+")").addClass("ms-selected").show(),this.$selectionUl.focus(),e.trigger("change"),typeof this.options.afterSelect=="function"){var s=i.grep(e.val(),function(l){return i.inArray(l,t)<0});this.options.afterSelect.call(this,s)}},deselect_all:function(){var e=this.$element,t=e.val();e.find("option").removeAttr("selected"),this.$selectableUl.find(".ms-elem-selectable").removeClass("ms-selected").show(),this.$selectionUl.find(".ms-optgroup-label").hide(),this.$selectableUl.find(".ms-optgroup-label").show(),this.$selectionUl.find(".ms-elem-selection").removeClass("ms-selected").hide(),this.$selectableUl.focus(),e.trigger("change"),typeof this.options.afterDeselect=="function"&&this.options.afterDeselect.call(this,t)},sanitize:function(e){var t=0,s,l;if(e.length==0)return t;var n=0;for(s=0,n=e.length;s<n;s++)l=e.charCodeAt(s),t=(t<<5)-t+l,t|=0;return t}},i.fn.multiSelect=function(){var e=arguments[0],t=arguments;return this.each(function(){var s=i(this),l=s.data("multiselect"),n=i.extend({},i.fn.multiSelect.defaults,s.data(),typeof e=="object"&&e);l||s.data("multiselect",l=new a(this,n)),typeof e=="string"?l[e](t[1]):l.init()})},i.fn.multiSelect.defaults={keySelect:[32],selectableOptgroup:!1,disabledClass:"disabled",dblClick:!1,keepOrder:!1,cssClass:""},i.fn.multiSelect.Constructor=a,i.fn.insertAt=function(e,t){return this.each(function(){e===0?t.prepend(this):t.children().eq(e-1).after(this)})}})(window.jQuery);const D=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));window.multiSelect=D;class M extends x{connect(){const a=document.getElementById(this.element.id),e=I.t(this.rightcolumnValue),t=I.t(this.leftcolumnValue);this.targetValue==""&&$(a).multiSelect({cssClass:"form-control",escapeHTML:!1,keepOrder:!0,selectableHeader:"<div class='custom-header' data-id='"+this.initValue+"' id='selectableH'>"+t+" ("+this.initValue+")</div>",selectionHeader:"<div class='custom-header' id='selectionH'>"+e+" (0)</div>",afterSelect:function(s){$("#selectableH").text(""+t+" ("+(parseInt($("#selectableH").attr("data-id"))-$(".ms-selected").length/2)+")"),$("#selectionH").text(""+e+" ("+$(".ms-selected").length/2+")")},afterDeselect:function(s){$("#selectableH").text(""+t+" ("+(parseInt($("#selectableH").attr("data-id"))-$(".ms-selected").length/2)+")"),$("#selectionH").text(""+e+" ("+$(".ms-selected").length/2+")")}})}selectall(){let a=document.getElementById(this.targetValue);return $(a).multiSelect("select_all"),!1}deselectall(){let a=document.getElementById(this.targetValue);return $(a).multiSelect("deselect_all"),!1}}A(M,"values",{init:String,target:String,leftcolumn:{type:String,default:"all"},rightcolumn:{type:String,default:"selected"}});export{M as default};
//# sourceMappingURL=multi_controller-BGVCmKAf.js.map
